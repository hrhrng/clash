name = "auth-gateway"
main = "src/index.ts"
compatibility_date = "2024-11-20"
compatibility_flags = ["nodejs_compat"]

# D1 Database binding (for project ownership checks)
[[d1_databases]]
binding = "DB"
database_name = "master-clash-frontend"
database_id = "aab16eeb-a375-490b-ad1e-cd092cd9f4bb"

# Service Bindings (production)
[[services]]
binding = "LORO_SYNC"
service = "loro-sync-server"

# Uncomment when frontend is deployed as Worker
# [[services]]
# binding = "FRONTEND"
# service = "master-clash-web"

[vars]
# Better Auth validation endpoint
BETTER_AUTH_BASE_PATH = "/api/better-auth"

# Development environment
[env.development]
vars = { ENVIRONMENT = "development" }

# Production environment
[env.production]
vars = { ENVIRONMENT = "production" }
